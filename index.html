<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MMT Financial & Insurance | Comprehensive Client Needs Analysis</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<style>
:root{
  --navy:#0d3b66;
  --bg:#f4f6f8;
  --card:#ffffff;
  --soft:#e8f1f8;
  --border:#d8dee6;
  --muted:#6b7280;
  --radius:14px;
}

*{ box-sizing:border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:var(--bg);
  color:#111827;
}

.container{ max-width:1100px; margin:0 auto; padding:16px; }
.card{ background:var(--card); border:1px solid var(--border); border-radius:var(--radius); padding:16px; }

header{
  text-align:center;
  padding-bottom:10px;
  border-bottom:1px solid var(--border);
  margin-bottom:14px;
}
.brand-row{
  display:flex; align-items:center; justify-content:center; gap:10px; flex-wrap:wrap;
}
header img{
  height:56px; width:auto; max-width:46vw; object-fit:contain; border-radius:10px;
}
h1{ font-size:20px; margin:10px 0 6px; }
header p{ margin:6px 0; color:var(--muted); line-height:1.35; }
header a{ color:var(--navy); font-weight:700; }

.licenses{
  margin-top:10px;
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:12px;
  background:#fbfdff;
  color:#374151;
  text-align:left;
  font-size:13px;
  line-height:1.35;
  max-width:980px;
  margin-left:auto;
  margin-right:auto;
}
.licenses strong{ color:#111827; }

.logo-warning{
  display:none;
  margin:10px auto 0;
  max-width:980px;
  background:#fff3cd;
  border:1px solid #ffeeba;
  color:#856404;
  padding:10px 12px;
  border-radius:12px;
  text-align:left;
  font-size:13px;
}
.logo-warning code{ font-weight:700; }

h2{
  margin:16px 0 10px;
  font-size:16px;
  background:var(--navy);
  color:#fff;
  padding:10px 12px;
  border-radius:12px;
}

label{ display:block; margin-top:10px; font-weight:700; }
input, textarea, select{
  width:100%;
  padding:12px;
  margin-top:6px;
  border:1px solid var(--border);
  border-radius:12px;
  font-size:16px;
  background:#fff;
}
textarea{ min-height:92px; resize:vertical; }
.hint{ font-size:13px; color:var(--muted); margin:6px 0 0; }

.grid{ display:grid; grid-template-columns:1fr; gap:10px; }
@media (min-width:900px){
  .container{ padding:22px; }
  .card{ padding:22px; }
  h1{ font-size:26px; }
  .grid.cols2{ grid-template-columns:1fr 1fr; gap:12px 16px; }
  header img{ height:72px; max-width:220px; }
}

.table-wrap{
  width:100%;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  border:1px solid var(--border);
  border-radius:12px;
  margin-top:10px;
  background:#fff;
}
table{ width:100%; border-collapse:collapse; min-width:860px; }
th, td{ border-bottom:1px solid var(--border); padding:10px; vertical-align:top; font-size:14px; }
th{ background:#f8fafc; position:sticky; top:0; z-index:1; }
.total{ background:var(--soft); font-weight:800; }

.addrow-bar{ margin-top:10px; display:flex; justify-content:flex-start; }

.actions{
  display:grid;
  grid-template-columns:1fr;
  gap:10px;
  margin-top:14px;
}
@media (min-width:640px){
  .actions{ grid-template-columns:1fr 1fr; }
  .actions .wide{ grid-column:1 / -1; }
}
button{
  width:100%;
  padding:14px 16px;
  font-size:16px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#fff;
  cursor:pointer;
}
button.primary{ background:var(--navy); color:#fff; border-color:var(--navy); }
button.danger{ background:#b91c1c; color:#fff; border-color:#b91c1c; }
button.smallbtn{ padding:10px 12px; font-size:14px; width:auto; border-radius:12px; }

.locked input, .locked textarea, .locked select{ background:#f3f4f6 !important; }
.locked .addrow-bar button, .locked .row-remove-btn{ display:none !important; }

.footer{
  text-align:center;
  font-size:13px;
  color:var(--muted);
  margin-top:18px;
  line-height:1.35;
}

@media print{
  body{ background:#fff; }
  .container{ padding:0; }
  .card{ border:none; padding:0; }
  button, .addrow-bar, .hint, .logo-warning{ display:none !important; }
  .table-wrap{ border:none; }
  a::after{ content:" (" attr(href) ")"; color:#111; font-weight:normal; }
}
</style>
</head>

<body>
<div class="container">
  <div class="card" id="formContainer">

    <header>
      <div class="brand-row">
        <img id="mmtLogo" src="./assets/mmt-logo.jpg" alt="MMT Logo">
        <img id="fegLogo" src="./assets/feg-logo.jpg" alt="FEG Logo">
      </div>

      <div id="logoWarning" class="logo-warning">
        One or more logos failed to load. Confirm your repo contains:
        <div style="margin-top:6px;">
          <code>assets/mmt-logo.jpg</code> and <code>assets/feg-logo.jpg</code>
        </div>
        (GitHub Pages paths are case-sensitive.)
      </div>

      <h1>MMT Financial & Insurance</h1>
      <p><strong>Educate ‚Ä¢ Protect ‚Ä¢ Wealth</strong></p>

      <div class="licenses">
        <div><strong>Marc Merritt</strong> ‚Äî NYS Life, Health, FIA Licensed since 2001, LA # 1010090</div>
        <div><strong>Marylene Teopengco-Merritt</strong> ‚Äî NYS Life &amp; FIA Licensed since 2017, LA # 1298496</div>
      </div>

      <p style="margin-top:10px;">
        üìû Marc Merritt, RVP: <strong>1-646-645-2453</strong><br>
        üìû Marylene Teopengco-Merritt, RVP: <strong>1-631-579-1904</strong>
      </p>

      <p class="hint">
        Tip: On mobile, the policy and retirement tables can be scrolled left/right.
      </p>
    </header>

    <h2>Client & Household Information</h2>
    <div class="grid cols2">
      <div>
        <label>Client Full Name</label>
        <input id="clientName" placeholder="First Last">
      </div>
      <div>
        <label>Client Occupation</label>
        <input id="clientOcc" placeholder="Occupation">
      </div>

      <div>
        <label>Client Annual Salary ($)</label>
        <input type="number" id="clientSalary" inputmode="decimal" placeholder="0">
      </div>
      <div>
        <label>Client Email</label>
        <input id="clientEmail" inputmode="email" placeholder="name@email.com">
      </div>

      <div>
        <label>Client Phone</label>
        <input id="clientPhone" inputmode="tel" placeholder="(###) ###-####">
      </div>
      <div>
        <label>Date of Birth</label>
        <input type="date" id="clientDOB">
      </div>

      <div>
        <label>Spouse / Partner Name</label>
        <input id="spouseName" placeholder="Full name">
      </div>
      <div>
        <label>Spouse Occupation</label>
        <input id="spouseOcc" placeholder="Occupation">
      </div>

      <div>
        <label>Spouse Annual Salary ($)</label>
        <input type="number" id="spouseSalary" inputmode="decimal" placeholder="0">
      </div>
      <div>
        <label>Dependents (names / ages)</label>
        <input id="dependents" placeholder="e.g., Jayden (16), Jared (12)">
      </div>
    </div>

    <h2>Address</h2>
    <div class="grid cols2">
      <div style="grid-column:1/-1;">
        <label>Street Address</label>
        <input id="addrStreet" placeholder="123 Main St Apt 4B">
      </div>
      <div>
        <label>City</label>
        <input id="addrCity" placeholder="City">
      </div>
      <div>
        <label>State</label>
        <input id="addrState" placeholder="NY">
      </div>
      <div>
        <label>ZIP Code</label>
        <input id="addrZip" inputmode="numeric" placeholder="11580">
      </div>
    </div>

    <h2>Health & Lifestyle Information</h2>
    <label>Health Issues / Medications / Concerns</label>
    <textarea id="healthIssues" placeholder="List any medical conditions, medications, or underwriting concerns"></textarea>

    <div class="grid cols2">
      <div>
        <label>Smoking Status</label>
        <select id="smokingStatus">
          <option value="">Select</option>
          <option>No</option>
          <option>Yes ‚Äì Occasionally</option>
          <option>Yes ‚Äì Regularly</option>
        </select>
      </div>
      <div>
        <label>Alcohol Consumption</label>
        <select id="alcoholStatus">
          <option value="">Select</option>
          <option>No</option>
          <option>Occasional</option>
          <option>Weekly</option>
          <option>Daily</option>
        </select>
      </div>
    </div>

    <h2>Existing Insurance Policies & Carriers</h2>
    <div class="hint">Life, Term, Whole Life, IUL, Annuities, Disability, LTC, etc.</div>

    <div class="table-wrap">
      <table id="policyTable">
        <thead>
          <tr>
            <th>Policy Type</th>
            <th>Carrier</th>
            <th>Policy #</th>
            <th>Coverage ($)</th>
            <th>Monthly Premium ($)</th>
            <th>Remove</th>
          </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
          <tr class="total">
            <td colspan="4">Total Monthly Premiums</td>
            <td><input id="policyTotal" class="total" readonly></td>
            <td></td>
          </tr>
        </tfoot>
      </table>
    </div>

    <div class="addrow-bar">
      <button id="addPolicyBtn" class="smallbtn" type="button" onclick="addPolicyRow()">‚ûï Add Policy</button>
    </div>

    <h2>401(k), 403(b), IRA, Roth, Pension & Other Retirement Accounts</h2>

    <div class="table-wrap">
      <table id="retTable">
        <thead>
          <tr>
            <th>Account Type</th>
            <th>Provider / Custodian</th>
            <th>Employer</th>
            <th>Current Value ($)</th>
            <th>Monthly Contribution ($)</th>
            <th>Remove</th>
          </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
          <tr class="total">
            <td colspan="3">Totals</td>
            <td><input id="retValTotal" class="total" readonly></td>
            <td><input id="retConTotal" class="total" readonly></td>
            <td></td>
          </tr>
        </tfoot>
      </table>
    </div>

    <div class="addrow-bar">
      <button id="addRetBtn" class="smallbtn" type="button" onclick="addRetRow()">‚ûï Add Retirement Account</button>
    </div>

    <h2>Life Insurance Needs Analysis</h2>
    <label>Debt & Liabilities</label><input type="number" class="life" inputmode="decimal" oninput="sumLife()" placeholder="0">
    <label>Final Expenses</label><input type="number" class="life" inputmode="decimal" oninput="sumLife()" placeholder="0">
    <label>Mortgage / Housing</label><input type="number" class="life" inputmode="decimal" oninput="sumLife()" placeholder="0">
    <label>Education Funding</label><input type="number" class="life" inputmode="decimal" oninput="sumLife()" placeholder="0">
    <label>Income Replacement</label><input type="number" class="life" inputmode="decimal" oninput="sumLife()" placeholder="0">
    <label>Emergency Fund</label><input type="number" class="life" inputmode="decimal" oninput="sumLife()" placeholder="0">
    <label>Legacy / Charity</label><input type="number" class="life" inputmode="decimal" oninput="sumLife()" placeholder="0">
    <label>Total Coverage Needed</label>
    <input id="lifeTotal" class="total" readonly>

    <h2>Monthly Retirement Budget</h2>

    <div class="grid cols2">
      <div>
        <label>Household Monthly Income (auto)</label>
        <input id="householdMonthlyIncome" class="total" readonly>
        <div class="hint">Calculated from Client + Spouse annual salaries √∑ 12.</div>
      </div>
      <div>
        <label>Total Current Monthly Retirement Savings (auto)</label>
        <input id="totalRetirementSavings" class="total" readonly>
        <div class="hint">Sum of premiums + contributions + tax refund + other monthly savings.</div>
      </div>
    </div>

    <label>Life Insurance Premiums (Monthly)</label>
    <input type="number" id="budgetLifePremium" inputmode="decimal" placeholder="0">

    <div class="hint" style="margin-top:6px;">
      <label style="font-weight:700; display:flex; gap:10px; align-items:center; margin:0;">
        <input type="checkbox" id="autoLifePremium" style="width:auto; margin:0;">
        Auto-fill from ‚ÄúTotal Monthly Premiums‚Äù above
      </label>
    </div>

    <label>IRA / 401(k) / 403(b) Contributions (Monthly)</label>
    <input type="number" id="budgetRetContrib" inputmode="decimal" placeholder="0">

    <div class="hint" style="margin-top:6px;">
      <label style="font-weight:700; display:flex; gap:10px; align-items:center; margin:0;">
        <input type="checkbox" id="autoRetContrib" style="width:auto; margin:0;">
        Auto-fill from ‚ÄúTotal Monthly Contributions‚Äù in retirement accounts table
      </label>
    </div>

    <label>Tax Refund (Monthly Equivalent)</label>
    <input type="number" id="budgetTaxRefund" inputmode="decimal" placeholder="0">

    <label>Other Monthly Savings Toward Retirement</label>
    <input type="number" id="budgetOtherSavings" inputmode="decimal" placeholder="0">

    <label>Estimated Monthly Living Expenses (excluding retirement savings)</label>
    <input type="number" id="livingExpenses" inputmode="decimal" placeholder="0">

    <label>Net Monthly Retirement Capacity (auto)</label>
    <input id="netRetirement" class="total" readonly>
    <div class="hint">
      Household Monthly Income ‚àí Living Expenses ‚àí Total Current Monthly Retirement Savings
    </div>

    <h2>Signature Acknowledgement</h2>
    <div class="grid cols2">
      <div>
        <label>Typed Signature (Full Name)</label>
        <input id="sigName" placeholder="Type your full name">
      </div>
      <div>
        <label>Date</label>
        <input type="date" id="sigDate">
      </div>
      <div style="grid-column:1/-1;">
        <label style="font-weight:700;">
          <input type="checkbox" id="sigAck" style="width:auto; margin-right:8px;">
          I confirm the information above is accurate to the best of my knowledge.
        </label>
      </div>
    </div>

    <div class="actions">
      <button class="primary" type="button" onclick="lockForm()">üîí Lock Form</button>
      <button id="downloadBtn" type="button" onclick="window.print()">‚¨áÔ∏è Download / Save</button>
      <button id="emailBtn" type="button" onclick="emailForm()">‚úâÔ∏è Email Form</button>
      <button class="danger wide" type="button" onclick="clearForm()">üßπ Clear Form</button>
    </div>

    <div class="footer">
      Please review my Attached Needs Analysis Form and I look forward to reviewing this with you or Marylene.
    </div>

  </div>
</div>

<script>
function showLogoWarning(){ document.getElementById("logoWarning").style.display="block"; }
document.getElementById("mmtLogo").addEventListener("error", showLogoWarning);
document.getElementById("fegLogo").addEventListener("error", showLogoWarning);

function n(v){ return Number(v || 0); }
function isLocked(){ return document.getElementById("formContainer").classList.contains("locked"); }

function addPolicyRow(){
  if (isLocked()) return;
  const tbody=document.querySelector("#policyTable tbody");
  const tr=document.createElement("tr");
  tr.innerHTML=`
    <td><input placeholder="Term / IUL / Whole Life / etc." style="min-width:140px;"></td>
    <td><input placeholder="Carrier" style="min-width:160px;"></td>
    <td><input placeholder="Policy #" style="min-width:140px;"></td>
    <td><input type="number" inputmode="decimal" placeholder="0" style="min-width:140px;"></td>
    <td><input type="number" inputmode="decimal" class="polPrem" placeholder="0" oninput="sumPolicies()" style="min-width:160px;"></td>
    <td><button type="button" class="smallbtn row-remove-btn" onclick="removeRow(this);sumPolicies()">Remove</button></td>`;
  tbody.appendChild(tr);
  sumPolicies();
}

function addRetRow(){
  if (isLocked()) return;
  const tbody=document.querySelector("#retTable tbody");
  const tr=document.createElement("tr");
  tr.innerHTML=`
    <td>
      <select style="min-width:150px;">
        <option value="">Select</option>
        <option>401(k)</option>
        <option>403(b)</option>
        <option>Traditional IRA</option>
        <option>Roth IRA</option>
        <option>Pension</option>
        <option>457</option>
        <option>Brokerage / Other</option>
      </select>
    </td>
    <td><input placeholder="Provider / Custodian" style="min-width:190px;"></td>
    <td><input placeholder="Employer (if applicable)" style="min-width:190px;"></td>
    <td><input type="number" inputmode="decimal" class="retVal" placeholder="0" oninput="sumRet()" style="min-width:160px;"></td>
    <td><input type="number" inputmode="decimal" class="retCon" placeholder="0" oninput="sumRet()" style="min-width:180px;"></td>
    <td><button type="button" class="smallbtn row-remove-btn" onclick="removeRow(this);sumRet()">Remove</button></td>`;
  tbody.appendChild(tr);
  sumRet();
}

function removeRow(btn){
  if (isLocked()) return;
  const tr = btn.closest("tr");
  if(tr) tr.remove();
}

function sumPolicies(){
  let t=0;
  document.querySelectorAll(".polPrem").forEach(i=>t += n(i.value));
  document.getElementById("policyTotal").value = t.toFixed(0);
  syncBudgetAutofill();
  calcRetirementCapacity();
}

function sumRet(){
  let v=0, c=0;
  document.querySelectorAll(".retVal").forEach(i=>v += n(i.value));
  document.querySelectorAll(".retCon").forEach(i=>c += n(i.value));
  document.getElementById("retValTotal").value = v.toFixed(0);
  document.getElementById("retConTotal").value = c.toFixed(0);
  syncBudgetAutofill();
  calcRetirementCapacity();
}

function sumLife(){
  let t=0;
  document.querySelectorAll(".life").forEach(i=>t += n(i.value));
  document.getElementById("lifeTotal").value = t.toFixed(0);
}

function householdMonthlyIncome(){
  const annual = n(document.getElementById("clientSalary").value) + n(document.getElementById("spouseSalary").value);
  return annual / 12;
}

function currentMonthlyRetirementSavings(){
  const prem = n(document.getElementById("budgetLifePremium").value);
  const con  = n(document.getElementById("budgetRetContrib").value);
  const tax  = n(document.getElementById("budgetTaxRefund").value);
  const oth  = n(document.getElementById("budgetOtherSavings").value);
  return prem + con + tax + oth;
}

function syncBudgetAutofill(){
  const autoLife = document.getElementById("autoLifePremium").checked;
  const autoCon  = document.getElementById("autoRetContrib").checked;

  if (autoLife){
    document.getElementById("budgetLifePremium").value = n(document.getElementById("policyTotal").value).toFixed(0);
  }
  if (autoCon){
    document.getElementById("budgetRetContrib").value = n(document.getElementById("retConTotal").value).toFixed(0);
  }
}

function calcRetirementCapacity(){
  const incomeM = householdMonthlyIncome();
  document.getElementById("householdMonthlyIncome").value = incomeM ? incomeM.toFixed(0) : "";

  const savingsM = currentMonthlyRetirementSavings();
  document.getElementById("totalRetirementSavings").value = savingsM ? savingsM.toFixed(0) : "";

  const living = n(document.getElementById("livingExpenses").value);

  const net = incomeM - living - savingsM;
  document.getElementById("netRetirement").value = isFinite(net) ? net.toFixed(0) : "";
}

function lockForm(){
  const sigName=document.getElementById("sigName").value.trim();
  const sigDate=document.getElementById("sigDate").value;
  const sigAck=document.getElementById("sigAck").checked;

  if(!sigAck || !sigName || !sigDate){
    alert("Complete signature acknowledgement before locking.");
    return;
  }

  document.getElementById("formContainer").classList.add("locked");
  document.querySelectorAll("input,textarea,select").forEach(i=>i.disabled=true);

  document.getElementById("downloadBtn").disabled = false;
  document.getElementById("emailBtn").disabled = false;

  alert("Form locked. Download/Save and email your completed form.");
}

function emailForm(){
  const clientName=(document.getElementById("clientName").value||"").trim();
  const subject=encodeURIComponent("Completed MMT Needs Analysis Form - " + (clientName || "Client"));

  const body=encodeURIComponent(
    "Client Name: " + (clientName || "__________________________") + "\n\n" +
    "Please review my Attached Needs Analysis Form and I look forward to reviewing this with you or Marylene.\n\n" +
    "IMPORTANT: Please attach the downloaded/printed PDF of this form to this email before sending."
  );

  const to="mhmerritt@gmail.com";
  const cc="mteopengco@gmail.com";  /* ‚úÖ Corrected Marylene email */

  window.location.href=`mailto:${to}?cc=${cc}&subject=${subject}&body=${body}`;
}

function clearForm(){
  if(!confirm("Clear all fields?")) return;

  document.getElementById("formContainer").classList.remove("locked");
  document.querySelectorAll("input,textarea,select").forEach(i=>{
    i.disabled=false;
    if(i.type==="checkbox") i.checked=false;
    else i.value="";
  });

  document.querySelector("#policyTable tbody").innerHTML="";
  document.querySelector("#retTable tbody").innerHTML="";
  addPolicyRow();
  addRetRow();

  document.getElementById("policyTotal").value="";
  document.getElementById("retValTotal").value="";
  document.getElementById("retConTotal").value="";
  document.getElementById("lifeTotal").value="";
  document.getElementById("householdMonthlyIncome").value="";
  document.getElementById("totalRetirementSavings").value="";
  document.getElementById("netRetirement").value="";
}

["clientSalary","spouseSalary","budgetLifePremium","budgetRetContrib","budgetTaxRefund","budgetOtherSavings","livingExpenses"]
  .forEach(id => document.getElementById(id).addEventListener("input", calcRetirementCapacity));

document.getElementById("autoLifePremium").addEventListener("change", () => { syncBudgetAutofill(); calcRetirementCapacity(); });
document.getElementById("autoRetContrib").addEventListener("change", () => { syncBudgetAutofill(); calcRetirementCapacity(); });

addPolicyRow();
addRetRow();
calcRetirementCapacity();
</script>

</body>
</html>
